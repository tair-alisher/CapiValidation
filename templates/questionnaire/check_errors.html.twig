{% extends 'base.html.twig' %}

{% block title %}Ошибки{% endblock %}

{% block body %}
<div class="wrapper">
  <h4>Ошибки</h4>
  <a href="{{ path('questionnaires') }}" class="btn btn-secondary">К списку опросников</a>
  <br>
  <br>
  {% if errors|length > 0 %}
    <table class="table table-striped">
      <thead>
      <tr>
        <th>Ошибка</th>
        <th></th>
      </tr>
      </thead>
      <tbody>
      {% for error in errors %}
        <tr>
          <td>{{ error.description }}</td>
          <td><a href="http://capi.stat.kg/Interview/Review/{{ error.interviewId }}" target="_blank" class="btn btn-primary">Просмотреть интервью</a></td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p><b><i>Ошибок нет.</i></b></p>
  {% endif %}

  {% if totalPages > 1 %}
    <ul class="pagination">
      <li class="page-item{{ currentPage == 1 ? ' disabled' }}">
        <a class="page-link" href="{{ path('questionnaire.errors', {page: currentPage-1 < 1 ? 1 : currentPage-1}) }}"
           aria-label="Назад">
          <span aria-hidden="true">&laquo;</span>
          <span class="sr-only">Previous</span>
        </a>
      </li>
        {% for i in 1..totalPages %}
          <li class="page-item{{ currentPage == i ? ' active' }}">
            <a class="page-link" href="{{ path('questionnaire.errors', {page: i}) }}">{{ i }}</a>
          </li>
        {% endfor %}

      <li class="page-item{{ currentPage == totalPages ? ' disabled' }}">
        <a class="page-link" href="{{ path('questionnaire.errors', {page: currentPage+1 <= totalPages ? currentPage+1 : currentPage}) }}">
          <span aria-hidden="true">&raquo;</span>
          <span class="sr-only">Вперед</span>
        </a>
      </li>
    </ul>
  {% endif %}
</div>
{% endblock %}